
## last month plan



目的是：
1、了解今年来的功能
2、通过mr查看一些golang的编码规范、设计模式 --- 这个真的很重要



中间件在监控使用的场景:  
```text
mysql
redis
kafka
elasticsearch
...
```


监控的架构，从数据接入到监控告警通知用户
```text
1、前提接入配置
  哪个产品，需要接入哪些指标维度、计算维度(比如1分钟、5分钟、15分钟、1小时等等)、事件类型

  计算维度在在指标维度的基础之上拓展的，主要是方便用户告警配置使用
  
2、产品侧主动上报数据
产品侧 -> 网关（丰富产品信息）-> kafka(源数据) -> flink (定时拉取接入配置，生产任务，实时计算) -> kafka(计算后的数据，比如1分钟、5分钟、30分钟聚合后的数据) -> 存储层(将数据存放到es、xstorm中，提供接口查询或者用于离线任务) 

同时kafka(计算后的数据，比如1分钟、5分钟、30分钟聚合后的数据) -> 告警使用 (用于检查是否告警)

产品侧  ----提供产品丰富信息

3、维度数据上报
在告警时，用户其实希望拿到更多的监控对象的一些信息、甚至是实例的标签信息
于是就引入了监控侧的cmdb(configuration management database) 用于存放各个云产品的核心数据信息，这些信息主要用于和告警的联动
使用场景：
  - 告警丰富信息 现在的告警丰富是通过php脚本执行，动态调用产品侧的接口实现获取的信息， 但是这里有很多问题，比如：php脚本难以维护、没有提供自测能力(只有等到告警失败的时候，才知道php脚本写错了)、新增信息比较困难（改脚本、产品改接口、无法自测）
  - 新增告警指标 在现有的情况下，我们是在接入的时候就已经定义好产品的namespace、视图名称、namespace-viewName下的指标信息，计算侧会基于接入的这些配置，生成flink任务计算；如果要新增由于历史原因，我们不能在原来的视图上面做新增，只能新增视图
               新增视图带来的缺点就是，存在重复的指标，而在监控侧这些指标计算又是直接存放到内存中的， 这样会导致内存增加，成本也会增加；成本增加后就需要后产品侧均摊，这是大家都不愿意看到的事情
               而引入维度服务后，产品侧想新增告警指标，就可以将数据上报到监控侧的cmdb中，监控侧就可以拿到这些数据做新增指标
  - 解决数据存储多份的问题 因为在监控侧存在很多的业务都需要使用到产品的信息，比如监控告警、AI工作台、计算层等等，之前大家都各自为政，当需要产品侧数据的时候，都找产品侧提供接口，拉取数据 -- 数据存储多份(存储成本)、可能内部命名规则还不一致，这样会导致内部协同时发现
               明明就是一个东西，但是命名千奇百怪的，对维护者很不友好、产品侧和监控侧维护多个接口

```

监控页面的功能、产品的信息




监控的核心业务梳理，自己负责的核心业务



ai工作台




