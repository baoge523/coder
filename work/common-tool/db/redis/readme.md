## redis



### redis 中的分片、master、备份是什么意思
8 分片/4GB/2 副本


### redis 中的数据类型（底层数据结构）和使用场景
string、hash、list、set、sorted set（zset）、bitmaps（位图）

#### string
底层数据结构：简单动态字符串；当存储数字时会使用 long 类型存储

使用场景：
1、存放用户会话、页面缓存、其他的json信息存储
2、计数器：用于存放文章的阅读量（只增）、点赞量（可增可减-取消点赞）
3、分布式锁：SETNX


#### hash
底层数据结构：
- 存放元素较少时： 压缩列表（ziplist）
- 存放元素较多时： 哈希表 hashtable

使用场景：
1、用户信息存储，存储的是对象类型
2、商品信息，存放商品的多属性
3、对象类型的数据，都可以通过hash来存放

#### list
底层数据结构：
- 存放元素较少时： 压缩列表（ziplist）
- 存放元素较多时： 双向链表 （linkedlist）

使用场景：
1、作为消息队列
2、最新消息列表
3、符合数组的数据结构的消息，就可以使用list来使用 -- 比如：数组、队列、栈


#### set 
底层数据结构：
- 存放整数且数据较少，使用intset
- 其他情况：使用hashtable    --- hashtable 的key本质就是set，很多语言中的set也是通过hashtable来实现的

使用场景：
- 标签系统：商品标签
- 共同好友：用户好友，查找用户共同好友
- 抽奖系统：存放所有参与抽奖的用户信息
- 无序队列的场景都可以使用set来存放

#### sorted set
底层数据结构：
- 元素较少时： 压缩列表，ziplist
- 元素较多时： 跳表（skiplist） + 哈希表 （hashtable）

跳表中存放分数信息和哈希表中的key信息
哈希表中存放业务数据信息

使用场景：
1、积分排行榜
2、延时队列
3、范围查询，价格区间的商品

#### bitmaps
底层数据结构： String 类型的位操作

使用场景：
1、用户签到，一个用户只需要使用32位（4byte）的空间，签到的对应bit时，将其设置成1即可
2、统计活跃用户




















