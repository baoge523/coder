## 指标最佳实践

https://github.com/kubernetes/kubernetes/blob/master/pkg/proxy/metrics/metrics.go

https://github.com/etcd-io/etcd/blob/main/server/etcdserver/metrics.go

https://github.com/prometheus/prometheus/blob/main/tsdb/head.go#L248

https://github.com/grafana/grafana/blob/main/pkg/infra/metrics/metrics.go#L213

https://github.com/influxdata/influxdb/blob/master/query/control/metrics.go#L32


https://github.com/grpc-ecosystem/go-grpc-middleware


https://github.com/prometheus/client_golang/blob/main/prometheus/process_collector.go#L61


对于counter, 要先rate后sum, 因为rate/irate/increase函数才有counter跳变检测.