

### golang 基础

map的扩容机制

```text
负载因子超标

负载因子 = 元素数量 / 桶的数量
Go 的 Map 默认的负载因子阈值是 6.5。
当 count / (2^B) > 6.5时（其中 B是桶数量的指数，桶数量为 2^B），会触发扩容。
这是一种 “翻倍”扩容，会创建一个新的、桶数量是原来两倍的桶数组，然后逐步将旧桶中的数据迁移到新桶中。
```


```markdown
Map 的扩容是 “渐进式” 的。在触发扩容后，并不会一次性将所有数据迁移完毕，
而是在后续的每次 插入 或 删除 操作时，迁移一部分数据（每次至少迁移一个桶）。
这样可以将扩容的计算量均摊到每次操作中，避免因一次性扩容导致程序卡顿
```